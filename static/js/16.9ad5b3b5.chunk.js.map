{"version":3,"sources":["components/ReactMarkdown/styles.tsx","components/ReactMarkdown/index.tsx","views/Voting/components/CastVoteModal/types.ts","views/Voting/Proposal/Details.tsx","views/Voting/components/TextEllipsis.tsx","views/Voting/Proposal/Results.tsx","views/Voting/components/CastVoteModal/MainView.tsx","views/Voting/components/CastVoteModal/index.tsx","views/Voting/Proposal/Vote.tsx","views/Voting/components/Proposal/VotesLoading.tsx","views/Voting/components/Proposal/Row.tsx","views/Voting/components/Proposal/VoteRow.tsx","views/Voting/Proposal/Votes.tsx","views/Voting/Proposal/index.tsx","../node_modules/lodash/orderBy.js","../node_modules/lodash/_baseOrderBy.js","../node_modules/lodash/_baseSortBy.js","../node_modules/lodash/_compareMultiple.js","../node_modules/lodash/_compareAscending.js","utils/calls/estimateGas.ts","utils/calls/farms.ts","utils/calls/pools.ts","utils/getGasPrice.ts","views/Voting/helpers.ts","views/Voting/config.ts","components/Tags.tsx","state/voting/hooks.ts","views/Voting/components/Proposals/tags.tsx","views/Voting/components/CastVoteModal/styles.tsx","views/Voting/components/Layout.tsx","views/Voting/components/CastVoteModal/DetailsView.tsx","views/Voting/hooks/useGetVotingPower.tsx"],"names":["Table","styled","table","theme","colors","text","TableBox","div","ThemedComponent","Title","props","as","scale","my","markdownComponents","h1","h2","h3","h4","h5","h6","p","children","ol","ul","pre","a","ReactMarkdown","remarkPlugins","gfm","components","ConfirmVoteView","DetailBox","Box","background","cardBorder","Details","proposal","t","useTranslation","startDate","Date","start","endDate","end","mb","alignItems","color","href","IPFS_GATEWAY","id","ml","slice","getBscScanLink","author","truncateHash","snapshot","proposalState","state","fontSize","format","TextEllipsis","Text","Results","choices","votes","results","calculateVoteResults","votingStatus","useGetVotingStateLoadingStatus","account","useWeb3React","totalVotes","getTotalFromVotes","FetchStatus","Fetched","map","choice","index","choiceVotes","totalChoiceVote","progress","hasVoted","some","vote","voter","toLowerCase","mt","title","variant","outline","mr","primaryStep","justifyContent","total","formatNumber","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","Fetching","times","length","count","height","MainView","isPending","isLoading","onConfirm","onViewDetails","onDismiss","textTransform","bold","label","onClick","style","cursor","width","endIcon","spin","disabled","CastVoteModal","onSuccess","proposalId","block","useState","MAIN","view","setView","modalIsOpen","setModalIsOpen","setIsPending","toastError","useToast","useWeb3Provider","library","connector","useTheme","useGetVotingPower","cakeBalance","cakeVaultBalance","cakePoolBalance","poolsBalance","cakeBnbLpBalance","ifoPoolBalance","verificationHash","isStartView","handleBack","DETAILS","handleDismiss","handleConfirmVote","voteMsg","JSON","stringify","generatePayloadData","type","SnapshotCommand","VOTE","payload","value","metadata","votingPower","toString","signMessage","sig","msg","address","sendSnapshotData","message","console","error","onBack","hideCloseButton","headerBackground","gradients","cardHeader","DetailsView","Choice","isChecked","isDisabled","ChoiceText","Vote","setVote","toastSuccess","dispatch","useAppDispatch","handleSuccess","fetchVotes","Number","useModal","presentCastVoteModal","flexShrink","checked","onChange","ConnectWalletButton","Row","Flex","StyledSkeleton","Skeleton","VotesLoading","AddressColumn","attrs","ChoiceColumn","VotingPowerColumn","Grid","mediaQueries","sm","VoteRow","isVoter","hasVotingPower","parseFloat","parseVotePower","incomingVote","Votes","showAll","setShowAll","orderedVotes","orderBy","displayVotes","isFinished","py","px","Proposal","useParams","useGetProposal","useGetVotes","voteLoadingStatus","proposalLoadingStatus","useGetProposalLoadingStatus","hasAccountVoted","isPageLoading","useEffect","fetchProposal","Container","Page","Link","to","startIcon","Layout","isCoreProposal","body","ProposalState","ACTIVE","PageLoader","baseOrderBy","require","isArray","module","exports","collection","iteratees","orders","guard","arrayMap","baseGet","baseIteratee","baseMap","baseSortBy","baseUnary","compareMultiple","identity","iteratee","result","key","object","other","array","comparer","sort","compareAscending","objCriteria","criteria","othCriteria","ordersLength","isSymbol","valIsDefined","valIsNull","valIsReflexive","valIsSymbol","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","estimateGas","contract","methodName","methodArgs","gasMarginPer10000","Error","rawGasEstimation","gasEstimation","mul","ethers","BigNumber","from","add","callWithEstimateGas","overrides","gasLimit","tx","options","DEFAULT_GAS_LIMIT","stakeFarm","masterChefContract","pid","amount","gasPrice","getGasPrice","DEFAULT_TOKEN_DECIMAL","enterStaking","deposit","unstakeFarm","leaveStaking","withdraw","harvestFarm","getActivePools","eligiblePools","pools","filter","pool","sousId","simpleRpcProvider","getBlockNumber","blockNumber","startBlockCalls","contractAddress","getAddress","name","endBlockCalls","multicall","sousChefV2","startBlocks","endBlocks","reduce","accum","poolCheck","startBlock","endBlock","gte","lte","userGas","store","getState","user","GAS_PRICE_GWEI","default","process","ChainId","MAINNET","testnet","ADMINS","includes","filterProposalsByType","proposals","proposalType","ProposalType","COMMUNITY","CORE","ALL","filterProposalsByState","generateMetaData","plugins","network","strategies","params","symbol","tokens","cake","decimals","version","SNAPSHOT_VERSION","timestamp","now","toFixed","space","PANCAKE_SPACE","fetch","SNAPSHOT_HUB_API","method","headers","Accept","response","ok","json","error_description","data","getVotingPower","poolAddresses","SNAPSHOT_VOTING_API","choiceText","power","PROPOSALS_TO_SHOW","VOTE_THRESHOLD","CoreTag","CommunityTag","DualTag","ManualPoolTag","CompoundingPoolTag","VoteNowTag","SoonTag","ClosedTag","useGetProposals","useSelector","voting","Object","values","_inValid","ProposalStateTag","PENDING","ProposalTypeTag","VotingBox","ModalInner","maxWidth","lg","textAlign","initialState","isActive","setVotingPower","setIsLoading","IFOPoolBalance","prevVotingPower","fetchVotingPower"],"mappings":"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","file":"static/js/16.9ad5b3b5.chunk.js","sourcesContent":["import React from 'react'\nimport { Heading, Text } from '@pancakeswap/uikit'\nimport { NormalComponents, SpecialComponents } from 'react-markdown/src/ast-to-react'\nimport styled from 'styled-components'\n\nconst Table = styled.table`\n  margin-bottom: 32px;\n  margin-top: 32px;\n  width: 100%;\n\n  td,\n  th {\n    color: ${({ theme }) => theme.colors.text};\n    padding: 8px;\n  }\n`\nconst TableBox = styled.div`\n  width: 100%;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n`\n\nconst ThemedComponent = styled.div`\n  color: ${({ theme }) => theme.colors.text};\n  margin-bottom: 16px;\n  margin-top: 16px;\n\n  li {\n    margin-bottom: 8px;\n  }\n`\n\nconst Pre = styled.pre`\n  color: ${({ theme }) => theme.colors.text};\n  margin-bottom: 16px;\n  margin-top: 16px;\n  max-width: 100%;\n  overflow-x: auto;\n`\n\nconst AStyle = styled.a`\n  word-break: break-all;\n`\n\nconst Title = (props) => {\n  return <Heading as=\"h4\" scale=\"lg\" my=\"16px\" {...props} />\n}\n\nconst markdownComponents: Partial<NormalComponents & SpecialComponents> = {\n  h1: Title,\n  h2: Title,\n  h3: Title,\n  h4: Title,\n  h5: Title,\n  h6: Title,\n  p: (props) => {\n    return <Text as=\"p\" my=\"16px\" {...props} />\n  },\n  table: ({ ...props }) => {\n    return (\n      <TableBox>\n        <Table>{props.children}</Table>\n      </TableBox>\n    )\n  },\n  ol: (props) => {\n    return <ThemedComponent as=\"ol\" {...props} />\n  },\n  ul: (props) => {\n    return <ThemedComponent as=\"ul\" {...props} />\n  },\n  pre: Pre,\n  a: AStyle,\n}\n\nexport default markdownComponents\n","import React from 'react'\nimport ReactMarkdownLib, { ReactMarkdownOptions } from 'react-markdown'\nimport gfm from 'remark-gfm'\nimport markdownComponents from './styles'\n\nconst ReactMarkdown: React.FC<ReactMarkdownOptions> = (props) => {\n  return <ReactMarkdownLib remarkPlugins={[gfm]} components={markdownComponents} {...props} />\n}\n\nexport default ReactMarkdown\n","import { InjectedModalProps } from '@pancakeswap/uikit'\n\nexport enum ConfirmVoteView {\n  MAIN = 'main',\n  DETAILS = 'details',\n}\n\nexport interface CastVoteModalProps extends InjectedModalProps {\n  onSuccess: () => Promise<void>\n  proposalId: string\n  vote: {\n    label: string\n    value: number\n  }\n  block?: number\n}\n","import React from 'react'\nimport { Box, Card, CardBody, CardHeader, Flex, Heading, LinkExternal, Text } from '@pancakeswap/uikit'\nimport styled from 'styled-components'\nimport { format } from 'date-fns'\nimport { Proposal } from 'state/types'\nimport { useTranslation } from 'contexts/Localization'\nimport { getBscScanLink } from 'utils'\nimport truncateHash from 'utils/truncateHash'\nimport { IPFS_GATEWAY } from '../config'\nimport { ProposalStateTag } from '../components/Proposals/tags'\n\ninterface DetailsProps {\n  proposal: Proposal\n}\n\nconst DetailBox = styled(Box)`\n  background-color: ${({ theme }) => theme.colors.background};\n  border: 1px solid ${({ theme }) => theme.colors.cardBorder};\n  border-radius: 16px;\n`\n\nconst Details: React.FC<DetailsProps> = ({ proposal }) => {\n  const { t } = useTranslation()\n  const startDate = new Date(proposal.start * 1000)\n  const endDate = new Date(proposal.end * 1000)\n\n  return (\n    <Card mb=\"16px\">\n      <CardHeader>\n        <Heading as=\"h3\" scale=\"md\">\n          {t('Details')}\n        </Heading>\n      </CardHeader>\n      <CardBody>\n        <Flex alignItems=\"center\" mb=\"8px\">\n          <Text color=\"textSubtle\">{t('Identifier')}</Text>\n          <LinkExternal href={`${IPFS_GATEWAY}/${proposal.id}`} ml=\"8px\">\n            {proposal.id.slice(0, 8)}\n          </LinkExternal>\n        </Flex>\n        <Flex alignItems=\"center\" mb=\"8px\">\n          <Text color=\"textSubtle\">{t('Creator')}</Text>\n          <LinkExternal href={getBscScanLink(proposal.author, 'address')} ml=\"8px\">\n            {truncateHash(proposal.author)}\n          </LinkExternal>\n        </Flex>\n        <Flex alignItems=\"center\" mb=\"16px\">\n          <Text color=\"textSubtle\">{t('Snapshot')}</Text>\n          <LinkExternal href={getBscScanLink(proposal.snapshot, 'block')} ml=\"8px\">\n            {proposal.snapshot}\n          </LinkExternal>\n        </Flex>\n        <DetailBox p=\"16px\">\n          <ProposalStateTag proposalState={proposal.state} mb=\"8px\" />\n          <Flex alignItems=\"center\">\n            <Text color=\"textSubtle\" fontSize=\"14px\">\n              {t('Start Date')}\n            </Text>\n            <Text ml=\"8px\">{format(startDate, 'yyyy-MM-dd HH:mm')}</Text>\n          </Flex>\n          <Flex alignItems=\"center\">\n            <Text color=\"textSubtle\" fontSize=\"14px\">\n              {t('End Date')}\n            </Text>\n            <Text ml=\"8px\">{format(endDate, 'yyyy-MM-dd HH:mm')}</Text>\n          </Flex>\n        </DetailBox>\n      </CardBody>\n    </Card>\n  )\n}\n\nexport default Details\n","import styled from 'styled-components'\nimport { Text } from '@pancakeswap/uikit'\n\nconst TextEllipsis = styled(Text)`\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n`\n\nexport default TextEllipsis\n","import React from 'react'\nimport {\n  Box,\n  Text,\n  Flex,\n  Card,\n  CardBody,\n  CardHeader,\n  Heading,\n  Progress,\n  Skeleton,\n  Tag,\n  CheckmarkCircleIcon,\n} from '@pancakeswap/uikit'\nimport { useWeb3React } from '@web3-react/core'\nimport times from 'lodash/times'\nimport { Vote } from 'state/types'\nimport { useGetVotingStateLoadingStatus } from 'state/voting/hooks'\nimport { formatNumber } from 'utils/formatBalance'\nimport { useTranslation } from 'contexts/Localization'\nimport { FetchStatus } from 'config/constants/types'\nimport { calculateVoteResults, getTotalFromVotes } from '../helpers'\nimport TextEllipsis from '../components/TextEllipsis'\n\ninterface ResultsProps {\n  choices: string[]\n  votes: Vote[]\n}\n\nconst Results: React.FC<ResultsProps> = ({ choices, votes }) => {\n  const { t } = useTranslation()\n  const results = calculateVoteResults(votes)\n  const votingStatus = useGetVotingStateLoadingStatus()\n  const { account } = useWeb3React()\n  const totalVotes = getTotalFromVotes(votes)\n\n  return (\n    <Card>\n      <CardHeader>\n        <Heading as=\"h3\" scale=\"md\">\n          {t('Current Results')}\n        </Heading>\n      </CardHeader>\n      <CardBody>\n        {votingStatus === FetchStatus.Fetched &&\n          choices.map((choice, index) => {\n            const choiceVotes = results[choice] || []\n            const totalChoiceVote = getTotalFromVotes(choiceVotes)\n            const progress = totalVotes === 0 ? 0 : (totalChoiceVote / totalVotes) * 100\n            const hasVoted = choiceVotes.some((vote) => {\n              return account && vote.voter.toLowerCase() === account.toLowerCase()\n            })\n\n            return (\n              <Box key={choice} mt={index > 0 ? '24px' : '0px'}>\n                <Flex alignItems=\"center\" mb=\"8px\">\n                  <TextEllipsis mb=\"4px\" title={choice}>\n                    {choice}\n                  </TextEllipsis>\n                  {hasVoted && (\n                    <Tag variant=\"success\" outline ml=\"8px\">\n                      <CheckmarkCircleIcon mr=\"4px\" /> {t('Voted')}\n                    </Tag>\n                  )}\n                </Flex>\n                <Box mb=\"4px\">\n                  <Progress primaryStep={progress} scale=\"sm\" />\n                </Box>\n                <Flex alignItems=\"center\" justifyContent=\"space-between\">\n                  <Text color=\"textSubtle\">{t('%total% Votes', { total: formatNumber(totalChoiceVote, 0, 2) })}</Text>\n                  <Text>\n                    {progress.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}%\n                  </Text>\n                </Flex>\n              </Box>\n            )\n          })}\n\n        {votingStatus === FetchStatus.Fetching &&\n          times(choices.length).map((count, index) => {\n            return (\n              <Box key={count} mt={index > 0 ? '24px' : '0px'}>\n                <Skeleton height=\"36px\" mb=\"4px\" />\n              </Box>\n            )\n          })}\n      </CardBody>\n    </Card>\n  )\n}\n\nexport default Results\n","import React from 'react'\nimport { IconButton, Text, Skeleton, Button, AutoRenewIcon, ChevronRightIcon } from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\nimport { formatNumber } from 'utils/formatBalance'\nimport TextEllipsis from '../TextEllipsis'\nimport { VotingBox, ModalInner } from './styles'\nimport { CastVoteModalProps } from './types'\n\ninterface MainViewProps {\n  vote: {\n    label: string\n    value: number\n  }\n  isLoading: boolean\n  isPending: boolean\n  total: number\n  onConfirm: () => void\n  onViewDetails: () => void\n  onDismiss: CastVoteModalProps['onDismiss']\n}\n\nconst MainView: React.FC<MainViewProps> = ({\n  vote,\n  total,\n  isPending,\n  isLoading,\n  onConfirm,\n  onViewDetails,\n  onDismiss,\n}) => {\n  const { t } = useTranslation()\n\n  return (\n    <>\n      <ModalInner>\n        <Text color=\"secondary\" mb=\"8px\" textTransform=\"uppercase\" fontSize=\"12px\" bold>\n          {t('Voting For')}\n        </Text>\n        <TextEllipsis bold fontSize=\"20px\" mb=\"8px\" title={vote.label}>\n          {vote.label}\n        </TextEllipsis>\n        <Text color=\"secondary\" mb=\"8px\" textTransform=\"uppercase\" fontSize=\"12px\" bold>\n          {t('Your Voting Power')}\n        </Text>\n        {isLoading ? (\n          <Skeleton height=\"64px\" mb=\"24px\" />\n        ) : (\n          <VotingBox onClick={onViewDetails} style={{ cursor: 'pointer' }}>\n            <Text bold fontSize=\"20px\">\n              {formatNumber(total, 0, 3)}\n            </Text>\n            <IconButton scale=\"sm\" variant=\"text\">\n              <ChevronRightIcon width=\"24px\" />\n            </IconButton>\n          </VotingBox>\n        )}\n        <Text as=\"p\" color=\"textSubtle\" fontSize=\"14px\">\n          {t('Are you sure you want to vote for the above choice? This action cannot be undone.')}\n        </Text>\n      </ModalInner>\n      <Button\n        isLoading={isPending}\n        endIcon={isPending ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\n        disabled={isLoading || total === 0}\n        width=\"100%\"\n        mb=\"8px\"\n        onClick={onConfirm}\n      >\n        {t('Confirm Vote')}\n      </Button>\n      <Button variant=\"secondary\" width=\"100%\" onClick={onDismiss}>\n        {t('Cancel')}\n      </Button>\n    </>\n  )\n}\n\nexport default MainView\n","import React, { useState } from 'react'\nimport { Box, Modal } from '@pancakeswap/uikit'\nimport { useWeb3React } from '@web3-react/core'\nimport { useTranslation } from 'contexts/Localization'\nimport { SnapshotCommand } from 'state/types'\nimport { signMessage } from 'utils/web3React'\nimport useToast from 'hooks/useToast'\nimport useWeb3Provider from 'hooks/useActiveWeb3React'\nimport useTheme from 'hooks/useTheme'\nimport { CastVoteModalProps, ConfirmVoteView } from './types'\nimport MainView from './MainView'\nimport DetailsView from './DetailsView'\nimport { generatePayloadData, Message, sendSnapshotData } from '../../helpers'\nimport useGetVotingPower from '../../hooks/useGetVotingPower'\n\nconst CastVoteModal: React.FC<CastVoteModalProps> = ({ onSuccess, proposalId, vote, block, onDismiss }) => {\n  const [view, setView] = useState<ConfirmVoteView>(ConfirmVoteView.MAIN)\n  const [modalIsOpen, setModalIsOpen] = useState(true)\n  const [isPending, setIsPending] = useState(false)\n  const { account } = useWeb3React()\n  const { t } = useTranslation()\n  const { toastError } = useToast()\n  const { library, connector } = useWeb3Provider()\n  const { theme } = useTheme()\n  const {\n    isLoading,\n    total,\n    cakeBalance,\n    cakeVaultBalance,\n    cakePoolBalance,\n    poolsBalance,\n    cakeBnbLpBalance,\n    ifoPoolBalance,\n    verificationHash,\n  } = useGetVotingPower(block, modalIsOpen)\n\n  const isStartView = view === ConfirmVoteView.MAIN\n  const handleBack = isStartView ? null : () => setView(ConfirmVoteView.MAIN)\n  const handleViewDetails = () => setView(ConfirmVoteView.DETAILS)\n\n  const title = {\n    [ConfirmVoteView.MAIN]: t('Confirm Vote'),\n    [ConfirmVoteView.DETAILS]: t('Voting Power'),\n  }\n\n  const handleDismiss = () => {\n    setModalIsOpen(false)\n    onDismiss()\n  }\n\n  const handleConfirmVote = async () => {\n    try {\n      setIsPending(true)\n      const voteMsg = JSON.stringify({\n        ...generatePayloadData(),\n        type: SnapshotCommand.VOTE,\n        payload: {\n          proposal: proposalId,\n          choice: vote.value,\n          metadata: {\n            votingPower: total.toString(),\n            verificationHash,\n          },\n        },\n      })\n\n      const sig = await signMessage(connector, library, account, voteMsg)\n      const msg: Message = { address: account, msg: voteMsg, sig }\n\n      // Save proposal to snapshot\n      await sendSnapshotData(msg)\n      setIsPending(false)\n\n      await onSuccess()\n\n      handleDismiss()\n    } catch (error) {\n      setIsPending(false)\n      toastError(t('Error'), (error as Error)?.message)\n      console.error(error)\n    }\n  }\n\n  return (\n    <Modal\n      title={title[view]}\n      onBack={handleBack}\n      onDismiss={onDismiss}\n      hideCloseButton={!isStartView}\n      headerBackground={theme.colors.gradients.cardHeader}\n    >\n      <Box mb=\"24px\" width=\"320px\">\n        {view === ConfirmVoteView.MAIN && (\n          <MainView\n            vote={vote}\n            isLoading={isLoading}\n            isPending={isPending}\n            total={total}\n            onConfirm={handleConfirmVote}\n            onViewDetails={handleViewDetails}\n            onDismiss={handleDismiss}\n          />\n        )}\n        {view === ConfirmVoteView.DETAILS && (\n          <DetailsView\n            total={total}\n            cakeBalance={cakeBalance}\n            ifoPoolBalance={ifoPoolBalance}\n            cakeVaultBalance={cakeVaultBalance}\n            cakePoolBalance={cakePoolBalance}\n            poolsBalance={poolsBalance}\n            cakeBnbLpBalance={cakeBnbLpBalance}\n          />\n        )}\n      </Box>\n    </Modal>\n  )\n}\n\nexport default CastVoteModal\n","import React, { useState } from 'react'\nimport styled from 'styled-components'\nimport { Button, Card, CardBody, CardHeader, CardProps, Heading, Radio, Text, useModal } from '@pancakeswap/uikit'\nimport { useWeb3React } from '@web3-react/core'\nimport { useAppDispatch } from 'state'\nimport { Proposal } from 'state/types'\nimport { fetchVotes } from 'state/voting'\nimport useToast from 'hooks/useToast'\nimport { useTranslation } from 'contexts/Localization'\nimport ConnectWalletButton from 'components/ConnectWalletButton'\nimport CastVoteModal from '../components/CastVoteModal'\n\ninterface VoteProps extends CardProps {\n  proposal: Proposal\n}\n\ninterface State {\n  label: string\n  value: number\n}\n\nconst Choice = styled.label<{ isChecked: boolean; isDisabled: boolean }>`\n  align-items: center;\n  border: 1px solid ${({ theme, isChecked }) => theme.colors[isChecked ? 'success' : 'cardBorder']};\n  border-radius: 16px;\n  cursor: ${({ isDisabled }) => (isDisabled ? 'not-allowed' : 'pointer')};\n  display: flex;\n  margin-bottom: 16px;\n  padding: 16px;\n`\n\nconst ChoiceText = styled.div`\n  flex: 1;\n  padding-left: 16px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 0;\n`\n\nconst Vote: React.FC<VoteProps> = ({ proposal, ...props }) => {\n  const [vote, setVote] = useState<State>(null)\n  const { t } = useTranslation()\n  const { toastSuccess } = useToast()\n  const dispatch = useAppDispatch()\n  const { account } = useWeb3React()\n\n  const handleSuccess = async () => {\n    toastSuccess(t('Vote cast!'))\n    dispatch(fetchVotes({ proposalId: proposal.id, block: Number(proposal.snapshot) }))\n  }\n\n  const [presentCastVoteModal] = useModal(\n    <CastVoteModal onSuccess={handleSuccess} proposalId={proposal.id} vote={vote} block={Number(proposal.snapshot)} />,\n  )\n\n  return (\n    <Card {...props}>\n      <CardHeader>\n        <Heading as=\"h3\" scale=\"md\">\n          {t('Cast your vote')}\n        </Heading>\n      </CardHeader>\n      <CardBody>\n        {proposal.choices.map((choice, index) => {\n          const isChecked = index + 1 === vote?.value\n\n          const handleChange = () => {\n            setVote({\n              label: choice,\n              value: index + 1,\n            })\n          }\n\n          return (\n            <Choice key={choice} isChecked={isChecked} isDisabled={!account}>\n              <div style={{ flexShrink: 0 }}>\n                <Radio scale=\"sm\" value={choice} checked={isChecked} onChange={handleChange} disabled={!account} />\n              </div>\n              <ChoiceText>\n                <Text as=\"span\" title={choice}>\n                  {choice}\n                </Text>\n              </ChoiceText>\n            </Choice>\n          )\n        })}\n        {account ? (\n          <Button onClick={presentCastVoteModal} disabled={vote === null}>\n            {t('Cast Vote')}\n          </Button>\n        ) : (\n          <ConnectWalletButton />\n        )}\n      </CardBody>\n    </Card>\n  )\n}\n\nexport default Vote\n","import React from 'react'\nimport { Box, Flex, Skeleton } from '@pancakeswap/uikit'\nimport times from 'lodash/times'\nimport styled from 'styled-components'\n\nconst Row = styled(Flex)`\n  border-bottom: 1px solid ${({ theme }) => theme.colors.cardBorder};\n  padding: 16px 24px;\n`\n\nconst StyledSkeleton = styled(Skeleton)`\n  flex: 1;\n`\n\nconst VotesLoading = () => {\n  return (\n    <Box>\n      {times(10).map((index) => (\n        <Row key={index}>\n          <Skeleton height=\"21px\" mr=\"32px\" width=\"100px\" />\n          <StyledSkeleton height=\"21px\" mr=\"32px\" width=\"100%\" />\n          <StyledSkeleton height=\"21px\" width=\"100%\" />\n        </Row>\n      ))}\n    </Box>\n  )\n}\n\nexport default VotesLoading\n","import styled from 'styled-components'\nimport { Grid, Box } from '@pancakeswap/uikit'\n\nexport const AddressColumn = styled(Box).attrs({ alignItems: 'center' })`\n  grid-area: address;\n`\n\nexport const ChoiceColumn = styled(Box)`\n  grid-area: choice;\n  overflow: hidden;\n`\n\nexport const VotingPowerColumn = styled(Box)`\n  justify-self: end;\n  grid-area: vote;\n`\n\nconst Row = styled(Grid)`\n  border-bottom: 1px solid ${({ theme }) => theme.colors.cardBorder};\n  grid-gap: 8px;\n  grid-template-areas:\n    'address address address'\n    'choice choice vote';\n  grid-template-columns: 1fr 1fr 120px;\n  padding: 8px 16px;\n\n  ${({ theme }) => theme.mediaQueries.sm} {\n    grid-gap: 16px;\n    grid-template-areas: 'address choice vote';\n    padding: 16px 24px;\n  }\n`\n\nexport default Row\n","import React from 'react'\nimport { Flex, LinkExternal, Text, Tag, CheckmarkCircleIcon } from '@pancakeswap/uikit'\nimport truncateHash from 'utils/truncateHash'\nimport { getBscScanLink } from 'utils'\nimport { useTranslation } from 'contexts/Localization'\nimport { Vote } from 'state/types'\nimport { IPFS_GATEWAY } from '../../config'\nimport TextEllipsis from '../TextEllipsis'\nimport Row, { AddressColumn, ChoiceColumn, VotingPowerColumn } from './Row'\n\ninterface VoteRowProps {\n  vote: Vote\n  isVoter: boolean\n}\n\nconst VoteRow: React.FC<VoteRowProps> = ({ vote, isVoter }) => {\n  const { t } = useTranslation()\n  const hasVotingPower = !!vote.metadata?.votingPower\n  const votingPower = hasVotingPower\n    ? parseFloat(vote.metadata.votingPower).toLocaleString(undefined, {\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 3,\n      })\n    : '--'\n\n  return (\n    <Row>\n      <AddressColumn>\n        <Flex alignItems=\"center\">\n          <LinkExternal href={getBscScanLink(vote.voter, 'address')}>{truncateHash(vote.voter)}</LinkExternal>\n          {isVoter && (\n            <Tag variant=\"success\" outline ml=\"8px\">\n              <CheckmarkCircleIcon mr=\"4px\" /> {t('Voted')}\n            </Tag>\n          )}\n        </Flex>\n      </AddressColumn>\n      <ChoiceColumn>\n        <TextEllipsis title={vote.proposal.choices[vote.choice - 1]}>\n          {vote.proposal.choices[vote.choice - 1]}\n        </TextEllipsis>\n      </ChoiceColumn>\n      <VotingPowerColumn>\n        <Flex alignItems=\"center\" justifyContent=\"end\">\n          <Text title={vote.metadata.votingPower}>{votingPower}</Text>\n          {hasVotingPower && <LinkExternal href={`${IPFS_GATEWAY}/${vote.id}`} />}\n        </Flex>\n      </VotingPowerColumn>\n    </Row>\n  )\n}\n\nexport default VoteRow\n","import React, { useState } from 'react'\nimport {\n  AutoRenewIcon,\n  Card,\n  CardHeader,\n  ChevronDownIcon,\n  Flex,\n  Heading,\n  Button,\n  ChevronUpIcon,\n} from '@pancakeswap/uikit'\nimport { useWeb3React } from '@web3-react/core'\nimport orderBy from 'lodash/orderBy'\nimport { useTranslation } from 'contexts/Localization'\nimport { Vote } from 'state/types'\nimport { FetchStatus } from 'config/constants/types'\nimport { useGetVotingStateLoadingStatus } from 'state/voting/hooks'\nimport VotesLoading from '../components/Proposal/VotesLoading'\nimport VoteRow from '../components/Proposal/VoteRow'\n\nconst VOTES_PER_VIEW = 20\n\ninterface VotesProps {\n  votes: Vote[]\n}\n\nconst parseVotePower = (incomingVote: Vote) => {\n  let votingPower = parseFloat(incomingVote?.metadata?.votingPower)\n  if (!votingPower) votingPower = 0\n  return votingPower\n}\n\nconst Votes: React.FC<VotesProps> = ({ votes }) => {\n  const [showAll, setShowAll] = useState(false)\n  const { t } = useTranslation()\n  const { account } = useWeb3React()\n  const orderedVotes = orderBy(votes, [parseVotePower, 'created'], ['desc', 'desc'])\n  const displayVotes = showAll ? orderedVotes : orderedVotes.slice(0, VOTES_PER_VIEW)\n  const voteStatus = useGetVotingStateLoadingStatus()\n  const isFinished = voteStatus === FetchStatus.Fetched\n\n  const handleClick = () => {\n    setShowAll(!showAll)\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <Flex alignItems=\"center\" justifyContent=\"space-between\">\n          <Heading as=\"h3\" scale=\"md\">\n            {t('Votes (%count%)', { count: votes.length.toLocaleString() })}\n          </Heading>\n          {!isFinished && <AutoRenewIcon spin width=\"22px\" />}\n        </Flex>\n      </CardHeader>\n      {!isFinished && <VotesLoading />}\n\n      {isFinished && displayVotes.length > 0 && (\n        <>\n          {displayVotes.map((vote) => {\n            const isVoter = account && vote.voter.toLowerCase() === account.toLowerCase()\n            return <VoteRow key={vote.id} vote={vote} isVoter={isVoter} />\n          })}\n          <Flex alignItems=\"center\" justifyContent=\"center\" py=\"8px\" px=\"24px\">\n            <Button\n              width=\"100%\"\n              onClick={handleClick}\n              variant=\"text\"\n              endIcon={\n                showAll ? (\n                  <ChevronUpIcon color=\"primary\" width=\"21px\" />\n                ) : (\n                  <ChevronDownIcon color=\"primary\" width=\"21px\" />\n                )\n              }\n              disabled={!isFinished}\n            >\n              {showAll ? t('Hide') : t('See All')}\n            </Button>\n          </Flex>\n        </>\n      )}\n\n      {isFinished && displayVotes.length === 0 && (\n        <Flex alignItems=\"center\" justifyContent=\"center\" py=\"32px\">\n          <Heading as=\"h5\">{t('No votes found')}</Heading>\n        </Flex>\n      )}\n    </Card>\n  )\n}\n\nexport default Votes\n","import React, { useEffect } from 'react'\nimport { ArrowBackIcon, Box, Button, Flex, Heading } from '@pancakeswap/uikit'\nimport { useWeb3React } from '@web3-react/core'\nimport { Link, useParams } from 'react-router-dom'\nimport { useAppDispatch } from 'state'\nimport { ProposalState } from 'state/types'\nimport {\n  useGetProposal,\n  useGetVotingStateLoadingStatus,\n  useGetVotes,\n  useGetProposalLoadingStatus,\n} from 'state/voting/hooks'\nimport { fetchProposal, fetchVotes } from 'state/voting'\nimport { useTranslation } from 'contexts/Localization'\nimport Container from 'components/Layout/Container'\nimport ReactMarkdown from 'components/ReactMarkdown'\nimport PageLoader from 'components/Loader/PageLoader'\nimport { FetchStatus } from 'config/constants/types'\nimport { isCoreProposal } from '../helpers'\nimport { ProposalStateTag, ProposalTypeTag } from '../components/Proposals/tags'\nimport Layout from '../components/Layout'\nimport Details from './Details'\nimport Results from './Results'\nimport Vote from './Vote'\nimport Votes from './Votes'\nimport { PageMeta } from '../../../components/Layout/Page'\n\nconst Proposal = () => {\n  const { id }: { id: string } = useParams()\n  const proposal = useGetProposal(id)\n  const { t } = useTranslation()\n  const { account } = useWeb3React()\n  const dispatch = useAppDispatch()\n  const votes = useGetVotes(id)\n  const voteLoadingStatus = useGetVotingStateLoadingStatus()\n  const proposalLoadingStatus = useGetProposalLoadingStatus()\n  const hasAccountVoted = account && votes.some((vote) => vote.voter.toLowerCase() === account.toLowerCase())\n  const { id: proposalId = null, snapshot = null } = proposal ?? {}\n  const isPageLoading = voteLoadingStatus === FetchStatus.Fetching || proposalLoadingStatus === FetchStatus.Fetching\n\n  useEffect(() => {\n    dispatch(fetchProposal(id))\n  }, [id, dispatch])\n\n  // We have to wait for the proposal to load before fetching the votes because we need to include the snapshot\n  useEffect(() => {\n    if (proposalId && snapshot) {\n      dispatch(fetchVotes({ proposalId, block: Number(snapshot) }))\n    }\n  }, [proposalId, snapshot, dispatch])\n\n  if (!proposal) {\n    return <PageLoader />\n  }\n\n  return (\n    <Container py=\"40px\">\n      <PageMeta />\n      <Box mb=\"40px\">\n        <Button as={Link} to=\"/voting\" variant=\"text\" startIcon={<ArrowBackIcon color=\"primary\" width=\"24px\" />} px=\"0\">\n          {t('Back to Vote Overview')}\n        </Button>\n      </Box>\n      <Layout>\n        <Box>\n          <Box mb=\"32px\">\n            <Flex alignItems=\"center\" mb=\"8px\">\n              <ProposalStateTag proposalState={proposal.state} />\n              <ProposalTypeTag isCoreProposal={isCoreProposal(proposal)} ml=\"8px\" />\n            </Flex>\n            <Heading as=\"h1\" scale=\"xl\" mb=\"16px\">\n              {proposal.title}\n            </Heading>\n            <Box>\n              <ReactMarkdown>{proposal.body}</ReactMarkdown>\n            </Box>\n          </Box>\n          {!isPageLoading && !hasAccountVoted && proposal.state === ProposalState.ACTIVE && (\n            <Vote proposal={proposal} mb=\"16px\" />\n          )}\n          <Votes votes={votes} />\n        </Box>\n        <Box>\n          <Details proposal={proposal} />\n          <Results choices={proposal.choices} votes={votes} />\n        </Box>\n      </Layout>\n    </Container>\n  )\n}\n\nexport default Proposal\n","var baseOrderBy = require('./_baseOrderBy'),\n    isArray = require('./isArray');\n\n/**\n * This method is like `_.sortBy` except that it allows specifying the sort\n * orders of the iteratees to sort by. If `orders` is unspecified, all values\n * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n * descending or \"asc\" for ascending sort order of corresponding values.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @param {string[]} [orders] The sort orders of `iteratees`.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 34 },\n *   { 'user': 'fred',   'age': 40 },\n *   { 'user': 'barney', 'age': 36 }\n * ];\n *\n * // Sort by `user` in ascending order and by `age` in descending order.\n * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n */\nfunction orderBy(collection, iteratees, orders, guard) {\n  if (collection == null) {\n    return [];\n  }\n  if (!isArray(iteratees)) {\n    iteratees = iteratees == null ? [] : [iteratees];\n  }\n  orders = guard ? undefined : orders;\n  if (!isArray(orders)) {\n    orders = orders == null ? [] : [orders];\n  }\n  return baseOrderBy(collection, iteratees, orders);\n}\n\nmodule.exports = orderBy;\n","var arrayMap = require('./_arrayMap'),\n    baseGet = require('./_baseGet'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n","var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n","var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n","import { ethers, Contract, Overrides } from 'ethers'\n\n/**\n * Estimate the gas needed to call a function, and add a 10% margin\n * @param contract Used to perform the call\n * @param methodName The name of the methode called\n * @param gasMarginPer10000 The gasMargin per 10000 (i.e. 10% -> 1000)\n * @param args An array of arguments to pass to the method\n * @returns https://docs.ethers.io/v5/api/providers/types/#providers-TransactionReceipt\n */\nexport const estimateGas = async (\n  contract: Contract,\n  methodName: string,\n  methodArgs: any[],\n  gasMarginPer10000: number,\n) => {\n  if (!contract[methodName]) {\n    throw new Error(`Method ${methodName} doesn't exist on ${contract.address}`)\n  }\n  const rawGasEstimation = await contract.estimateGas[methodName](...methodArgs)\n  // By convention, ethers.BigNumber values are multiplied by 1000 to avoid dealing with real numbers\n  const gasEstimation = rawGasEstimation\n    .mul(ethers.BigNumber.from(10000).add(ethers.BigNumber.from(gasMarginPer10000)))\n    .div(ethers.BigNumber.from(10000))\n  return gasEstimation\n}\n\n/**\n * Perform a contract call with a gas value returned from estimateGas\n * @param contract Used to perform the call\n * @param methodName The name of the method called\n * @param methodArgs An array of arguments to pass to the method\n * @param overrides An overrides object to pass to the method\n * @returns https://docs.ethers.io/v5/api/providers/types/#providers-TransactionReceipt\n */\nexport const callWithEstimateGas = async (\n  contract: Contract,\n  methodName: string,\n  methodArgs: any[] = [],\n  overrides: Overrides = {},\n  gasMarginPer10000 = 1000,\n): Promise<ethers.providers.TransactionResponse> => {\n  const gasEstimation = estimateGas(contract, methodName, methodArgs, gasMarginPer10000)\n  const tx = await contract[methodName](...methodArgs, {\n    gasLimit: gasEstimation,\n    ...overrides,\n  })\n  return tx\n}\n","import BigNumber from 'bignumber.js'\nimport { DEFAULT_GAS_LIMIT, DEFAULT_TOKEN_DECIMAL } from 'config'\nimport getGasPrice from 'utils/getGasPrice'\n\nconst options = {\n  gasLimit: DEFAULT_GAS_LIMIT,\n}\n\nexport const stakeFarm = async (masterChefContract, pid, amount) => {\n  const gasPrice = getGasPrice()\n  const value = new BigNumber(amount).times(DEFAULT_TOKEN_DECIMAL).toString()\n  if (pid === 0) {\n    return masterChefContract.enterStaking(value, { ...options, gasPrice })\n  }\n\n  return masterChefContract.deposit(pid, value, { ...options, gasPrice })\n}\n\nexport const unstakeFarm = async (masterChefContract, pid, amount) => {\n  const gasPrice = getGasPrice()\n  const value = new BigNumber(amount).times(DEFAULT_TOKEN_DECIMAL).toString()\n  if (pid === 0) {\n    return masterChefContract.leaveStaking(value, { ...options, gasPrice })\n  }\n\n  return masterChefContract.withdraw(pid, value, { ...options, gasPrice })\n}\n\nexport const harvestFarm = async (masterChefContract, pid) => {\n  const gasPrice = getGasPrice()\n  if (pid === 0) {\n    return masterChefContract.leaveStaking('0', { ...options, gasPrice })\n  }\n\n  return masterChefContract.deposit(pid, '0', { ...options, gasPrice })\n}\n","/* eslint-disable import/prefer-default-export */\nimport BigNumber from 'bignumber.js'\nimport pools from 'config/constants/pools'\nimport sousChefV2 from 'config/abi/sousChefV2.json'\nimport multicall from '../multicall'\nimport { simpleRpcProvider } from '../providers'\nimport { getAddress } from '../addressHelpers'\n\n/**\n * Returns the total number of pools that were active at a given block\n */\nexport const getActivePools = async (block?: number) => {\n  const eligiblePools = pools\n    .filter((pool) => pool.sousId !== 0)\n    .filter((pool) => pool.isFinished === false || pool.isFinished === undefined)\n  const blockNumber = block || (await simpleRpcProvider.getBlockNumber())\n  const startBlockCalls = eligiblePools.map(({ contractAddress }) => ({\n    address: getAddress(contractAddress),\n    name: 'startBlock',\n  }))\n  const endBlockCalls = eligiblePools.map(({ contractAddress }) => ({\n    address: getAddress(contractAddress),\n    name: 'bonusEndBlock',\n  }))\n  const startBlocks = await multicall(sousChefV2, startBlockCalls)\n  const endBlocks = await multicall(sousChefV2, endBlockCalls)\n\n  return eligiblePools.reduce((accum, poolCheck, index) => {\n    const startBlock = startBlocks[index] ? new BigNumber(startBlocks[index]) : null\n    const endBlock = endBlocks[index] ? new BigNumber(endBlocks[index]) : null\n\n    if (!startBlock || !endBlock) {\n      return accum\n    }\n\n    if (startBlock.gte(blockNumber) || endBlock.lte(blockNumber)) {\n      return accum\n    }\n\n    return [...accum, poolCheck]\n  }, [])\n}\n","import { ChainId } from '@pancakeswap/sdk'\nimport store from 'state'\nimport { GAS_PRICE_GWEI } from 'state/user/hooks/helpers'\n\n/**\n * Function to return gasPrice outwith a react component\n */\nconst getGasPrice = (): string => {\n  const chainId = process.env.REACT_APP_CHAIN_ID\n  const state = store.getState()\n  const userGas = state.user.gasPrice || GAS_PRICE_GWEI.default\n  return chainId === ChainId.MAINNET.toString() ? userGas : GAS_PRICE_GWEI.testnet\n}\n\nexport default getGasPrice\n","import { SNAPSHOT_HUB_API, SNAPSHOT_VOTING_API } from 'config/constants/endpoints'\nimport tokens from 'config/constants/tokens'\nimport { Proposal, ProposalState, ProposalType, Vote } from 'state/types'\nimport { simpleRpcProvider } from 'utils/providers'\nimport { ADMINS, PANCAKE_SPACE, SNAPSHOT_VERSION } from './config'\n\nexport const isCoreProposal = (proposal: Proposal) => {\n  return ADMINS.includes(proposal.author.toLowerCase())\n}\n\nexport const filterProposalsByType = (proposals: Proposal[], proposalType: ProposalType) => {\n  switch (proposalType) {\n    case ProposalType.COMMUNITY:\n      return proposals.filter((proposal) => !isCoreProposal(proposal))\n    case ProposalType.CORE:\n      return proposals.filter((proposal) => isCoreProposal(proposal))\n    case ProposalType.ALL:\n    default:\n      return proposals\n  }\n}\n\nexport const filterProposalsByState = (proposals: Proposal[], state: ProposalState) => {\n  return proposals.filter((proposal) => proposal.state === state)\n}\n\nexport interface Message {\n  address: string\n  msg: string\n  sig: string\n}\n\n/**\n * Generates metadata required by snapshot to validate payload\n */\nexport const generateMetaData = () => {\n  return {\n    plugins: {},\n    network: 56,\n    strategies: [{ name: 'cake', params: { symbol: 'CAKE', address: tokens.cake.address, decimals: 18 } }],\n  }\n}\n\n/**\n * Returns data that is required on all snapshot payloads\n */\nexport const generatePayloadData = () => {\n  return {\n    version: SNAPSHOT_VERSION,\n    timestamp: (Date.now() / 1e3).toFixed(),\n    space: PANCAKE_SPACE,\n  }\n}\n\n/**\n * General function to send commands to the snapshot api\n */\nexport const sendSnapshotData = async (message: Message) => {\n  const response = await fetch(SNAPSHOT_HUB_API, {\n    method: 'post',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(message),\n  })\n\n  if (!response.ok) {\n    const error = await response.json()\n    throw new Error(error?.error_description)\n  }\n\n  const data = await response.json()\n  return data\n}\n\nexport const getVotingPower = async (account: string, poolAddresses: string[], block?: number) => {\n  const blockNumber = block || (await simpleRpcProvider.getBlockNumber())\n  const response = await fetch(`${SNAPSHOT_VOTING_API}/power`, {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      address: account,\n      block: blockNumber,\n      poolAddresses,\n    }),\n  })\n  const data = await response.json()\n  return data.data\n}\n\nexport const calculateVoteResults = (votes: Vote[]): { [key: string]: Vote[] } => {\n  return votes.reduce((accum, vote) => {\n    const choiceText = vote.proposal.choices[vote.choice - 1]\n\n    return {\n      ...accum,\n      [choiceText]: accum[choiceText] ? [...accum[choiceText], vote] : [vote],\n    }\n  }, {})\n}\n\nexport const getTotalFromVotes = (votes: Vote[]) => {\n  return votes.reduce((accum, vote) => {\n    let power = parseFloat(vote.metadata?.votingPower)\n\n    if (!power) {\n      power = 0\n    }\n\n    return accum + power\n  }, 0)\n}\n","export const PROPOSALS_TO_SHOW = 10\nexport const ADMINS = [\n  '0x842B508681eE336E74600974B4623B709477d29D', // TARO\n  '0x977e0c1005dff8749f8cac22f4df0bd5f013d1a7', // CHUNGUS\n  '0x6eaf1b33b8672c5dc40ab8f4ba3a0111723126c7', // HOPS\n].map((address) => address.toLowerCase())\nexport const IPFS_GATEWAY = 'https://gateway.ipfs.io/ipfs'\nexport const SNAPSHOT_VERSION = '0.1.3'\nexport const PANCAKE_SPACE = 'cake.eth'\nexport const VOTE_THRESHOLD = 10\n","import React from 'react'\nimport {\n  Tag,\n  VerifiedIcon,\n  CommunityIcon,\n  RefreshIcon,\n  AutoRenewIcon,\n  TagProps,\n  TimerIcon,\n  BlockIcon,\n  VoteIcon,\n} from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\n\nconst CoreTag: React.FC<TagProps> = (props) => {\n  const { t } = useTranslation()\n  return (\n    <Tag variant=\"secondary\" outline startIcon={<VerifiedIcon width=\"18px\" color=\"secondary\" mr=\"4px\" />} {...props}>\n      {t('Core')}\n    </Tag>\n  )\n}\n\nconst CommunityTag: React.FC<TagProps> = (props) => {\n  const { t } = useTranslation()\n  return (\n    <Tag variant=\"failure\" outline startIcon={<CommunityIcon width=\"18px\" color=\"failure\" mr=\"4px\" />} {...props}>\n      {t('Community')}\n    </Tag>\n  )\n}\n\nconst DualTag: React.FC<TagProps> = (props) => {\n  const { t } = useTranslation()\n  return (\n    <Tag variant=\"textSubtle\" outline {...props}>\n      {t('Dual')}\n    </Tag>\n  )\n}\n\nconst ManualPoolTag: React.FC<TagProps> = (props) => {\n  const { t } = useTranslation()\n  return (\n    <Tag variant=\"secondary\" outline startIcon={<RefreshIcon width=\"18px\" color=\"secondary\" mr=\"4px\" />} {...props}>\n      {t('Manual')}\n    </Tag>\n  )\n}\n\nconst CompoundingPoolTag: React.FC<TagProps> = (props) => {\n  const { t } = useTranslation()\n  return (\n    <Tag variant=\"success\" outline startIcon={<AutoRenewIcon width=\"18px\" color=\"success\" mr=\"4px\" />} {...props}>\n      {t('Auto')}\n    </Tag>\n  )\n}\n\nconst VoteNowTag: React.FC<TagProps> = (props) => {\n  const { t } = useTranslation()\n  return (\n    <Tag variant=\"success\" startIcon={<VoteIcon width=\"18px\" color=\"success\" mr=\"4px\" />} {...props}>\n      {t('Vote Now')}\n    </Tag>\n  )\n}\n\nconst SoonTag: React.FC<TagProps> = (props) => {\n  const { t } = useTranslation()\n  return (\n    <Tag variant=\"binance\" startIcon={<TimerIcon width=\"18px\" color=\"success\" mr=\"4px\" />} {...props}>\n      {t('Soon')}\n    </Tag>\n  )\n}\n\nconst ClosedTag: React.FC<TagProps> = (props) => {\n  const { t } = useTranslation()\n  return (\n    <Tag variant=\"textDisabled\" startIcon={<BlockIcon width=\"18px\" color=\"textDisabled\" mr=\"4px\" />} {...props}>\n      {t('Closed')}\n    </Tag>\n  )\n}\n\nexport { CoreTag, CommunityTag, DualTag, ManualPoolTag, CompoundingPoolTag, VoteNowTag, SoonTag, ClosedTag }\n","import { useSelector } from 'react-redux'\nimport { State } from '../types'\n\n// Voting\nexport const useGetProposals = () => {\n  const proposals = useSelector((state: State) => state.voting.proposals)\n  return Object.values(proposals)\n}\n\nexport const useGetProposal = (proposalId: string) => {\n  const proposal = useSelector((state: State) => state.voting.proposals[proposalId])\n  return proposal\n}\n\nexport const useGetVotes = (proposalId: string) => {\n  const votes = useSelector((state: State) => state.voting.votes[proposalId])\n  return votes ? votes.filter((vote) => vote._inValid !== true) : []\n}\n\nexport const useGetVotingStateLoadingStatus = () => {\n  const votingStatus = useSelector((state: State) => state.voting.voteLoadingStatus)\n  return votingStatus\n}\n\nexport const useGetProposalLoadingStatus = () => {\n  const votingStatus = useSelector((state: State) => state.voting.proposalLoadingStatus)\n  return votingStatus\n}\n","import React from 'react'\nimport { TagProps } from '@pancakeswap/uikit'\nimport { ClosedTag, CommunityTag, CoreTag, SoonTag, VoteNowTag } from 'components/Tags'\nimport { ProposalState } from 'state/types'\n\ninterface ProposalStateTagProps extends TagProps {\n  proposalState: ProposalState\n}\n\nexport const ProposalStateTag: React.FC<ProposalStateTagProps> = ({ proposalState, ...props }) => {\n  if (proposalState === ProposalState.ACTIVE) {\n    return <VoteNowTag {...props} />\n  }\n\n  if (proposalState === ProposalState.PENDING) {\n    return <SoonTag {...props} />\n  }\n\n  return <ClosedTag {...props} />\n}\n\ninterface ProposalTypeTagProps extends TagProps {\n  isCoreProposal: boolean\n}\n\nexport const ProposalTypeTag: React.FC<ProposalTypeTagProps> = ({ isCoreProposal, ...props }) => {\n  if (isCoreProposal) {\n    return <CoreTag {...props} />\n  }\n\n  return <CommunityTag {...props} />\n}\n","import React from 'react'\nimport { Box, BoxProps } from '@pancakeswap/uikit'\nimport styled from 'styled-components'\n\nexport const VotingBox = styled.div`\n  align-items: center;\n  border: 1px solid ${({ theme }) => theme.colors.cardBorder};\n  border-radius: 12px;\n  display: flex;\n  height: 64px;\n  justify-content: space-between;\n  margin-bottom: 24px;\n  padding: 0 16px;\n`\n\nexport const ModalInner: React.FC<BoxProps> = (props) => {\n  return <Box mb=\"24px\" maxWidth=\"320px\" {...props} />\n}\n","import styled from 'styled-components'\n\nconst Layout = styled.div`\n  align-items: start;\n  display: grid;\n  grid-gap: 32px;\n  grid-template-columns: minmax(0, 1fr);\n\n  ${({ theme }) => theme.mediaQueries.lg} {\n    grid-template-columns: 1fr 332px;\n  }\n`\n\nexport default Layout\n","import React from 'react'\nimport { Text, Flex } from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\nimport { formatNumber } from 'utils/formatBalance'\nimport { VotingBox, ModalInner } from './styles'\n\ninterface DetailsViewProps {\n  total: number\n  cakeBalance: number\n  cakeVaultBalance: number\n  cakePoolBalance: number\n  poolsBalance: number\n  cakeBnbLpBalance: number\n  ifoPoolBalance: number\n}\n\nconst DetailsView: React.FC<DetailsViewProps> = ({\n  total,\n  cakeBalance,\n  cakeVaultBalance,\n  cakePoolBalance,\n  poolsBalance,\n  cakeBnbLpBalance,\n  ifoPoolBalance,\n}) => {\n  const { t } = useTranslation()\n\n  return (\n    <ModalInner mb=\"0\">\n      <Text as=\"p\" mb=\"24px\" fontSize=\"14px\" color=\"textSubtle\">\n        {t(\n          'Your voting power is determined by the amount of CAKE you held at the block detailed below. CAKE held in other places does not contribute to your voting power.',\n        )}\n      </Text>\n      <Text color=\"secondary\" textTransform=\"uppercase\" mb=\"4px\" bold fontSize=\"14px\">\n        {t('Overview')}\n      </Text>\n      <VotingBox>\n        <Text color=\"secondary\">{t('Your Voting Power')}</Text>\n        <Text bold fontSize=\"20px\">\n          {formatNumber(total, 0, 3)}\n        </Text>\n      </VotingBox>\n      <Text color=\"secondary\" textTransform=\"uppercase\" mb=\"4px\" bold fontSize=\"14px\">\n        {t('Your Cake Held Now')}\n      </Text>\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"4px\">\n        <Text color=\"textSubtle\" fontSize=\"16px\">\n          {t('Wallet')}\n        </Text>\n        <Text textAlign=\"right\">{formatNumber(cakeBalance, 0, 3)}</Text>\n      </Flex>\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"4px\">\n        <Text color=\"textSubtle\" fontSize=\"16px\">\n          {t('Manual CAKE Pool')}\n        </Text>\n        <Text textAlign=\"right\">{formatNumber(cakePoolBalance, 0, 3)}</Text>\n      </Flex>\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"4px\">\n        <Text color=\"textSubtle\" fontSize=\"16px\">\n          {t('Auto CAKE Pool')}\n        </Text>\n        <Text textAlign=\"right\">{formatNumber(cakeVaultBalance, 0, 3)}</Text>\n      </Flex>\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"4px\">\n        <Text color=\"textSubtle\" fontSize=\"16px\">\n          {t('IFO Pool')}\n        </Text>\n        <Text textAlign=\"right\">{formatNumber(ifoPoolBalance, 0, 3)}</Text>\n      </Flex>\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"4px\">\n        <Text color=\"textSubtle\" fontSize=\"16px\">\n          {t('Other Syrup Pools')}\n        </Text>\n        <Text textAlign=\"right\">{formatNumber(poolsBalance, 0, 3)}</Text>\n      </Flex>\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"4px\">\n        <Text color=\"textSubtle\" fontSize=\"16px\">\n          {t('CAKE BNB LP')}\n        </Text>\n        <Text textAlign=\"right\">{formatNumber(cakeBnbLpBalance, 0, 3)}</Text>\n      </Flex>\n    </ModalInner>\n  )\n}\n\nexport default DetailsView\n","import { useState, useEffect } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport { getActivePools } from 'utils/calls'\nimport { getAddress } from 'utils/addressHelpers'\nimport { simpleRpcProvider } from 'utils/providers'\nimport { getVotingPower } from '../helpers'\n\ninterface State {\n  verificationHash: string\n  cakeBalance: number\n  cakeVaultBalance: number\n  cakePoolBalance: number\n  poolsBalance: number\n  cakeBnbLpBalance: number\n  ifoPoolBalance: number\n  total: number\n}\n\nconst initialState: State = {\n  verificationHash: null,\n  cakeBalance: 0,\n  cakeVaultBalance: 0,\n  cakePoolBalance: 0,\n  poolsBalance: 0,\n  cakeBnbLpBalance: 0,\n  ifoPoolBalance: 0,\n  total: 0,\n}\n\nconst useGetVotingPower = (block?: number, isActive = true): State & { isLoading: boolean } => {\n  const { account } = useWeb3React()\n  const [votingPower, setVotingPower] = useState(initialState)\n  const [isLoading, setIsLoading] = useState(!!account)\n\n  useEffect(() => {\n    const fetchVotingPower = async () => {\n      setIsLoading(true)\n\n      try {\n        const blockNumber = block || (await simpleRpcProvider.getBlockNumber())\n        const eligiblePools = await getActivePools(blockNumber)\n        const poolAddresses = eligiblePools.map(({ contractAddress }) => getAddress(contractAddress))\n        const {\n          cakeBalance,\n          cakeBnbLpBalance,\n          cakePoolBalance,\n          total,\n          poolsBalance,\n          cakeVaultBalance,\n          verificationHash,\n          IFOPoolBalance,\n        } = await getVotingPower(account, poolAddresses, blockNumber)\n\n        if (isActive) {\n          setVotingPower((prevVotingPower) => ({\n            ...prevVotingPower,\n            verificationHash,\n            cakeBalance: parseFloat(cakeBalance),\n            cakeBnbLpBalance: parseFloat(cakeBnbLpBalance),\n            cakePoolBalance: parseFloat(cakePoolBalance),\n            poolsBalance: parseFloat(poolsBalance),\n            cakeVaultBalance: parseFloat(cakeVaultBalance),\n            ifoPoolBalance: IFOPoolBalance ? parseFloat(IFOPoolBalance) : 0,\n            total: parseFloat(total),\n          }))\n        }\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    if (account && isActive) {\n      fetchVotingPower()\n    }\n  }, [account, block, setVotingPower, isActive, setIsLoading])\n\n  return { ...votingPower, isLoading }\n}\n\nexport default useGetVotingPower\n"],"sourceRoot":""}